{"version":3,"sources":["webpack:///webpack/bootstrap ac4fb64a1b23bf86abde?2998","webpack:///./public/src/config.js?475d","webpack:///./public/src/sw.js"],"names":["sections","title","section","paginated","urlsToCache","cacheName","cacheVersion","Log","hnOptions","log","watch","sendMessage","self","clients","matchAll","type","includeUncontrolled","then","forEach","client","postMessage","message","fetchedFromNetwork","event","request","url","response","status","cacheCopy","clone","caches","open","cache","put","unableToResolve","Response","statusText","headers","Headers","addEventListener","URL","method","respondWith","match","cached","network","fetch","catch","console","error","createCacheBustedRequest","Request","bustedUrl","location","href","search","Date","now","waitUntil","addAll","keys","Promise","all","filter","key","startsWith","map","delete","claim","data"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;AChEA,IAAIA,WAAW,CACX,EAACC,OAAO,KAAR,EAAeC,SAAS,KAAxB,EAA+BC,WAAW,IAA1C,EADW,EAEX,EAACF,OAAO,KAAR,EAAeC,SAAS,KAAxB,EAA+BC,WAAW,IAA1C,EAFW,EAGX,EAACF,OAAO,MAAR,EAAgBC,SAAS,MAAzB,EAAiCC,WAAW,IAA5C,EAHW,EAIX,EAACF,OAAO,KAAR,EAAeC,SAAS,KAAxB,EAA+BC,WAAW,IAA1C,EAJW,EAKX,EAACF,OAAO,MAAR,EAAgBC,SAAS,KAAzB,EAAgCC,WAAW,IAA3C,EALW,CAAf;;AAQA,IAAIC,cAAc,CACd;AACA;AACA;AACA;AAJc,CAAlB;;AAOA,IAAIC,YAAY,YAAhB;AACA,IAAIC,eAAe,MAAnB;;AAEA;;;;AAIA,IAAIC,MAAM,SAANA,GAAM,GAAM,CAAE,CAAlB;;AAEA;AACA,IAAIC,YAAY,EAAEC,KAAKF,GAAP,EAAYG,OAAO,IAAnB,EAAhB;;kBAEe;AACXV,sBADW;AAEXI,4BAFW;AAGXC,wBAHW;AAIXC,8BAJW;AAKXC,YALW;AAMXC;AANW,C;;;;;;;;;;;;;;;;;;ACxBf;;;;;;AAEA,IAAID,MAAM,iBAAOA,GAAjB;;AAEA;;;;;;AAPA;AACA;AACA;AAWA,IAAII,cAAc,SAAdA,WAAc,UAAW;AACzB,WAAOC,KAAKC,OAAL,CAAaC,QAAb,CAAsB;AACzBC,cAAM,QADmB;AAEzBC,6BAAqB;AAFI,KAAtB,EAINC,IAJM,CAID,mBAAW;AACbJ,gBAAQK,OAAR,CAAgB,kBAAU;AACtBC,mBAAOC,WAAP,CAAmBC,OAAnB;AACH,SAFD;AAGH,KARM,CAAP;AASH,CAVD;;AAYA;;AAEA;AACA,IAAIC,qBAAqB,SAArBA,kBAAqB;AAAA,WAAS,oBAAY;AAC1Cf,YAAI,sCAAJ,EAA4CgB,MAAMC,OAAN,CAAcC,GAA1D;AACA,YAAI,CAACC,QAAD,IAAaA,SAASC,MAAT,KAAoB,GAAjC,IAAwCD,SAASX,IAAT,KAAkB,OAA9D,EAAuE;AACnE;AACH;;AAED,YAAIa,YAAYF,SAASG,KAAT,EAAhB;AACAC,eACGC,IADH,CACQ,iBAAOzB,YAAP,GAAsB,iBAAOD,SADrC,EAEGY,IAFH,CAEQ;AAAA,mBAASe,MAAMC,GAAN,CAAUV,MAAMC,OAAhB,EAAyBI,SAAzB,CAAT;AAAA,SAFR,EAGGX,IAHH,CAGQ;AAAA,mBAAMV,IAAI,yCAAJ,EAA+CgB,MAAMC,OAAN,CAAcC,GAA7D,CAAN;AAAA,SAHR;AAIA,eAAOC,QAAP;AACH,KAZwB;AAAA,CAAzB;;AAcA;AACA,IAAIQ,kBAAkB,SAAlBA,eAAkB,GAAM;AACxB3B,QAAI,yDAAJ;AACA,WAAO,IAAI4B,QAAJ,CAAa,8BAAb,EAA6C;AAChDR,gBAAQ,GADwC;AAEhDS,oBAAY,qBAFoC;AAGhDC,iBAAS,IAAIC,OAAJ,CAAY;AACjB,4BAAgB;AADC,SAAZ;AAHuC,KAA7C,CAAP;AAOH,CATD;AAUA;AACA1B,KAAK2B,gBAAL,CAAsB,OAAtB,EAA+B,iBAAS;AACpChC,QAAI,kCAAJ,EAAwCgB,MAAMC,OAAN,CAAcC,GAAtD;;AAEA,QAAIA,MAAM,IAAIe,GAAJ,CAAQjB,MAAMC,OAAN,CAAcC,GAAtB,CAAV;;AAEA;AACA,QAAIF,MAAMC,OAAN,CAAciB,MAAd,KAAyB,KAA7B,EAAoC;AAChC;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAlC,QAAI,4BAA4BkB,GAAhC;;AAEAF,UAAMmB,WAAN,CACIZ,OAAOa,KAAP,CAAapB,MAAMC,OAAnB,EAA4BP,IAA5B,CAAiC,kBAAU;AACvCV,YAAI,qBAAJ,EAA2BqC,SAAS,UAAT,GAAsB,WAAjD,EAA8DrB,MAAMC,OAAN,CAAcC,GAA5E;;AAEA,YAAIoB,UAAUC,MAAMvB,MAAMC,OAAZ,EACTP,IADS,CACJK,mBAAmBC,KAAnB,CADI,EACuBW,eADvB,EAETa,KAFS,CAEH,iBAAS;AACZC,oBAAQvC,GAAR,CAAYwC,KAAZ;AACA,mBAAOnB,OAAOa,KAAP,CAAa,GAAb,CAAP;AACH,SALS,CAAd;;AAOA,eAAOC,UAAUC,OAAjB;AACH,KAXD,CADJ;AAcH,CArCD;;AAuCA,IAAIK,2BAA2B,SAA3BA,wBAA2B,CAACzB,GAAD,EAAS;AACpC,QAAID,UAAU,IAAI2B,OAAJ,CAAY1B,GAAZ,EAAiB,EAACO,OAAO,QAAR,EAAjB,CAAd;AACA;AACA;AACA;AACA,QAAI,WAAWR,OAAf,EAAwB;AACpB,eAAOA,OAAP;AACH;;AAED;AACA,QAAI4B,YAAY,IAAIZ,GAAJ,CAAQf,GAAR,EAAab,KAAKyC,QAAL,CAAcC,IAA3B,CAAhB;AACAF,cAAUG,MAAV,IAAoB,CAACH,UAAUG,MAAV,GAAmB,GAAnB,GAAyB,EAA1B,IAAgC,YAAhC,GAA+CC,KAAKC,GAAL,EAAnE;AACA,WAAO,IAAIN,OAAJ,CAAYC,SAAZ,CAAP;AACH,CAbD;;AAeAxC,KAAK2B,gBAAL,CAAsB,SAAtB,EAAiC,iBAAS;AACtChB,UAAMmC,SAAN;AACI;AACA;AACA5B,WAAOC,IAAP,CAAY,iBAAOzB,YAAP,GAAsB,iBAAOD,SAAzC,EACKY,IADL,CACU;AAAA,eAASe,MAAM2B,MAAN,CAAa,iBAAOvD,WAApB,CAAT;AAAA,KADV,EAEK2C,KAFL,CAEW;AAAA,eAASC,QAAQC,KAAR,CAAc,yBAAd,EAAyCA,KAAzC,CAAT;AAAA,KAFX,CAHJ;AAOH,CARD;;AAUArC,KAAK2B,gBAAL,CAAsB,UAAtB,EAAkC,iBAAS;AACvChB,UAAMmC,SAAN,CACI5B,OAAO8B,IAAP,GACK3C,IADL,CACU;AAAA,eAAQ4C,QAAQC,GAAR,CACVF,KAAKG,MAAL,CAAY;AAAA,mBAAO,CAACC,IAAIC,UAAJ,CAAe,iBAAO3D,YAAtB,CAAR;AAAA,SAAZ,CAAyD;AAAzD,UACK4D,GADL,CACS;AAAA,mBAAOpC,OAAOqC,MAAP,CAAcH,GAAd,CAAP;AAAA,SADT,CACoC;AADpC,SADU,CAAR;AAAA,KADV,EAKK/C,IALL,CAKU;AAAA,eAAML,KAAKC,OAAL,CAAauD,KAAb,EAAN;AAAA,KALV,CADJ;AAQH,CATD;;AAWA;AACAxD,KAAK2B,gBAAL,CAAsB,SAAtB,EAAiC,iBAAS;AACtC,QAAIhB,MAAM8C,IAAN,KAAe,MAAnB,EAA2B;AACvB1D,oBAAY,OAAZ;AACH;AACJ,CAJD,E","file":"sw.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ac4fb64a1b23bf86abde","let sections = [\n    {title: 'Top', section: 'top', paginated: true},\n    {title: 'New', section: 'new', paginated: true},\n    {title: 'Show', section: 'show', paginated: true},\n    {title: 'Ask', section: 'ask', paginated: true},\n    {title: 'Jobs', section: 'job', paginated: true}\n];\n\nlet urlsToCache = [\n    '/hackernews/top/1'\n    // '/images/icons/favicon.ico',\n    // '/images/icons/favicon-32x32.png',\n    // '/images/icons/favicon-16x16.png'\n];\n\nlet cacheName = 'hn-mithril';\nlet cacheVersion = \"v1::\";\n\n/**\n * Log function, you can set to console.log for debugging process\n * @method Log\n */\nlet Log = () => {};\n\n// Hackernews options\nlet hnOptions = { log: Log, watch: true};\n\nexport default {\n    sections,\n    urlsToCache,\n    cacheName,\n    cacheVersion,\n    Log,\n    hnOptions\n};\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/config.js","// import firebase from 'firebase/app';\n// import 'firebase/database';\n// import Hackernews from 'firebase-hackernews/dist/firebase-hackernews.js';\nimport config from './config';\n\nlet Log = config.Log;\n\n/**\n * Helper function to send a message to the client\n * @method sendMessage\n * @param  {Any}    message\n * @return {Promise}\n */\nlet sendMessage = message => {\n    return self.clients.matchAll({\n        type: 'window',\n        includeUncontrolled: true\n    })\n    .then(clients => {\n        clients.forEach(client => {\n            client.postMessage(message);\n        });\n    })\n};\n\n// let hackernews = Hackernews.init(firebase, config.hnOptions);\n\n// Function to add the network response to the cache\nlet fetchedFromNetwork = event => response => {\n    Log('WORKER: fetch response from network.', event.request.url);\n    if (!response || response.status !== 200 || response.type !== 'basic') {\n        return;\n    }\n\n    let cacheCopy = response.clone();\n    caches\n      .open(config.cacheVersion + config.cacheName)\n      .then(cache => cache.put(event.request, cacheCopy))\n      .then(() => Log('WORKER: fetch response stored in cache.', event.request.url));\n    return response;\n};\n\n// If the network or the cache response fail, response with Service Unavailable\nlet unableToResolve = () => {\n    Log('WORKER: fetch request failed in both cache and network.');\n    return new Response('<h1>Service Unavailable</h1>', {\n        status: 503,\n        statusText: 'Service Unavailable',\n        headers: new Headers({\n            'Content-Type': 'text/html'\n        })\n    });\n};\n// Fetch listener\nself.addEventListener(\"fetch\", event => {\n    Log('WORKER: fetch event in progress.', event.request.url);\n\n    let url = new URL(event.request.url);\n\n    // We only handle Get requests all others let them pass\n    if (event.request.method !== 'GET') {\n        return;\n    }\n\n    // // If the url starts with hackernews fetch from the hn webservice\n    // if (url.pathname.startsWith('/hackernews/')) {\n    //     Log((`hn:sw: start hooking of fetch, ${url}`));\n    //     return event.respondWith(hackernews.fetch(url.pathname).then(data => {\n    //         Log((`hn:sw: end hooking of fetch`));\n    //         return new Response(JSON.stringify(data), {\n    //             headers: {'Content-Type': 'application/json'}\n    //         });\n    //     }));\n    // }\n\n    Log('WORKER: fetchevent for ' + url);\n\n    event.respondWith(\n        caches.match(event.request).then(cached => {\n            Log('WORKER: fetch event', cached ? '(cached)' : '(network)', event.request.url);\n\n            let network = fetch(event.request)\n                .then(fetchedFromNetwork(event), unableToResolve)\n                .catch(error => {\n                    console.log(error);\n                    return caches.match('/');\n                });\n\n            return cached || network;\n        })\n    );\n});\n\nlet createCacheBustedRequest = (url) => {\n    let request = new Request(url, {cache: 'reload'});\n    // See https://fetch.spec.whatwg.org/#concept-request-mode\n    // This is not yet supported in Chrome as of M48, so we need to explicitly check to see\n    // if the cache: 'reload' option had any effect.\n    if ('cache' in request) {\n        return request;\n    }\n\n    // If {cache: 'reload'} didn't have any effect, append a cache-busting URL parameter instead.\n    let bustedUrl = new URL(url, self.location.href);\n    bustedUrl.search += (bustedUrl.search ? '&' : '') + 'cachebust=' + Date.now();\n    return new Request(bustedUrl);\n};\n\nself.addEventListener(\"install\", event => {\n    event.waitUntil(\n        // We can't use cache.add() here, since we want OFFLINE_URL to be the cache key, but\n        // the actual URL we end up requesting might include a cache-busting parameter.\n        caches.open(config.cacheVersion + config.cacheName)\n            .then(cache => cache.addAll(config.urlsToCache))\n            .catch(error => console.error('WORKER: Failed to cache', error))\n    );\n});\n\nself.addEventListener(\"activate\", event => {\n    event.waitUntil(\n        caches.keys()\n            .then(keys => Promise.all(\n                keys.filter(key => !key.startsWith(config.cacheVersion)) // Filter by keys that don't start with the latest version prefix.\n                    .map(key => caches.delete(key)) // Return a promise that's fulfilled when each outdated cache is deleted.\n            ))\n            .then(() => self.clients.claim())\n    );\n});\n\n// When we receive an init event respond with ready\nself.addEventListener('message', event => {\n    if (event.data === 'init') {\n        sendMessage('ready');\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/sw.js"],"sourceRoot":""}